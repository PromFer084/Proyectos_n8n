{
  "name": "Digestor_de_Datos(clinica)",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -208,
        -64
      ],
      "id": "dcbdb2e5-03ef-403c-bd0c-20aec32e7932",
      "name": "When chat message received",
      "webhookId": "13193b54-4e03-48e9-986c-45f5341ecd74"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        0,
        -64
      ],
      "id": "e37f6cea-f23b-42af-9b27-dd9247a79ac6",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -144,
        144
      ],
      "id": "03b07750-3842-4ec2-92fb-205caab155e3",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "7nnNa8chNLVO1xp8",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        16,
        144
      ],
      "id": "de2c61ae-637c-4f97-a9b5-22c92a9af73e",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "acP63byQdUZTcNg6",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Utiliza esta herramienta para obtener informacion de la clinica y sus servicios",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        160,
        160
      ],
      "id": "c1d2098e-8d29-4e14-8506-08819bcb1cbd",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "p1H5h5SFwqSC47Dg",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "15diV48QTJI49Yo0QTkhodqd0r3Qj9DpI",
          "mode": "list",
          "cachedResultName": "consultorio_dental.pdf",
          "cachedResultUrl": "https://drive.google.com/file/d/15diV48QTJI49Yo0QTkhodqd0r3Qj9DpI/view?usp=drivesdk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        720,
        -64
      ],
      "id": "cdcd5a5c-a7db-4a82-96c9-0e0632134de6",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "w6qyvTRukXwoKWJi",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        1056,
        -64
      ],
      "id": "e15d45bf-2193-4644-affc-3be128f47a35",
      "name": "Supabase Vector Store1",
      "credentials": {
        "supabaseApi": {
          "id": "p1H5h5SFwqSC47Dg",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        896,
        128
      ],
      "id": "f8e1f8a6-411a-416b-be09-e3a82ef6744c",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "7nnNa8chNLVO1xp8",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        1200,
        128
      ],
      "id": "d08b7700-ea0e-42ba-81cf-b707cd1068dd",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        80,
        304
      ],
      "id": "599422aa-2bff-41f2-9e73-98eaf33feb26",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "7nnNa8chNLVO1xp8",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "pipeline de ingesta de datos",
        "height": 368,
        "width": 784,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        656,
        -112
      ],
      "id": "9376a39c-7431-4f94-8a46-002d804a5e28",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "el agente en marcha",
        "height": 560,
        "width": 880
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -320,
        -128
      ],
      "id": "f1647667-1d32-452c-9cfc-c7c9c96890eb",
      "name": "Sticky Note2"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "0a118c9a-3b8b-4fa9-bcb0-c6486e6ff854",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "dbfccb8f46589c48b6d4197dcb05fd8d93cc477fa4b94375b0d479dd26ee58e5"
  },
  "id": "OaFk8CMMrT1x3s2O",
  "tags": []
}